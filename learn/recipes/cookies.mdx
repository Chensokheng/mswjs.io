---
title: Cookies
order: 1
---

## Limitations

The fetch specification [explicitly forbids](https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name) setting `Set-Cookie` and `Set-Cookie2` headers when constructing `Response` instances for security considerations.

However, since Mock Service Worker executes on the client side, it can provide a functionality similar to receiving a mocked cookie from the response without violating security. To achieve that, use the `ctx.cookie` utility function to set the given cookies on the `document.cookie` directly.

---

## Get request cookies

```js highlights=2-3
rest.post('/login', (req, res, ctx) => {
  // Access request cookies.
  const { authToken } = req.cookies

  if (isValidToken(authToken)) {
    return res(
      ctx.json({
        id: 'abc-123',
        firstName: 'John',
      }),
    )
  }

  return res(ctx.status(403), ctx.json({ message: 'Failed to authenticate!' }))
})
```

<Hint>
  The value of <code>req.cookies</code> respects the{' '}
  <code>req.credentials</code>. Learn more about the{' '}
  <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials">
    Request Credentials
  </a>
  .
</Hint>

---

## Set response cookies

```js highlights=3-5
rest.post('/login', (req, res, ctx) => {
  return res(
    // Set the response cookie.
    // This sets the cookie in `document.cookie` on the client.
    ctx.cookie('auth-token', 'abc-123'),
  )
})
```

> Note that you still won't be able to access the `Set-Cookie` header on the response, as the cookie is set on the `document` directly, bypassing network.

---

## Cookies persistency

> Tell about how cookies set in one request handler persist for another handler based on the origin.
