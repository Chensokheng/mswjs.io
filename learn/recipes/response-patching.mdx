---
title: Response patching
order: 5
---

_Response patching_ is a technique that allows you to create a mocked response based on the actual response.

This technique can be used to extend an existing API for the purpose of incremental development or debugging. For response patching to work, your response resolver should perform an actual request. To do that, use the designated `ctx.fetch` utility and provide it with the intercepted request instance exposed to your request handler as the first (`req`) argument.

Here's an example of patching a response from the user detail endpoint in [GitHub API v3](https://developer.github.com/v3/).

```js highlights=2-3
rest.get('https://api.github.com/users/:username', async (req, res, ctx) => {
  // Perform an original request using the intercepted `req` instance.
  const originalResponse = await ctx.fetch(req)
  const originalJson = await originalResponse.json()

  return res(
    ctx.json({
      ...originalResponse,
      full_name: 'John Maverick',
    }),
  )
})
```

The `ctx.fetch` utility is a wrapper around `window.fetch` that does the following:

- Derives the correct request `init` and `input` based on the intercepted request instance.
- Ensures that any request made via `ctx.fetch` bypasses any existing request handlers, even if they would otherwise capture such request.

<ResponsePreview
  request={{
    method: 'GET',
    url: 'https://api.github.com**/users/octocat**',
  }}
  statusCode={301}
  response={{
    statusCode: 200,
    body: `
{
  // Resolved from the original response
  "location": "San Francisco",
  "firstName": "Not the real first name"
}
    `,
  }}
  codeProps={{
    focusedLines: '2,3',
  }}
/>
